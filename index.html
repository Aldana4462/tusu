<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>La CÃ¡psula</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;background:#000;font-family:Arial,Helvetica,sans-serif;color:#fff}
#background{position:fixed;inset:0;background:radial-gradient(circle at center,#000 0%,#111 100%);pointer-events:none;overflow:hidden;z-index:0}
.particle{position:absolute;border-radius:50%;width:6px;height:6px;background:radial-gradient(circle,rgba(180,220,255,0.4),rgba(0,0,255,0) 70%);filter:blur(2px);opacity:.3}
#scene{position:fixed;inset:0;perspective:1200px;z-index:1;pointer-events:none}
.bubble{position:absolute;top:50%;left:50%;width:80px;height:80px;margin:-40px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 8px rgba(255,255,255,.2),inset 0 0 12px rgba(0,0,0,.4),0 4px 12px rgba(0,0,0,.5);background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.6) 0%,rgba(200,200,200,.15) 60%,rgba(50,50,50,.8) 100%);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,.6);transform-style:preserve-3d;pointer-events:none}
.bubble.interactive{pointer-events:auto}
.bubble span{pointer-events:none}
#tooltip{position:fixed;z-index:2;background:rgba(0,0,0,.8);border:1px solid #fff;border-radius:4px;padding:6px 10px;font-size:.9rem;display:none;white-space:nowrap;pointer-events:none}
@media(max-width:600px){.bubble{width:60px;height:60px;margin:-30px}}
</style>
</head>
<body>
<div id="background"></div>
<div id="scene"></div>
<div id="tooltip"></div>
<script>
const count=100,startInterval=1,speed=80,startZ=-2500,zoneMinZ=-360,zoneMaxZ=360,endZ=800;
const capsulesData=Array.from({length:count},(_,i)=>({
 id:i+1,
 photoUrl:`https://via.placeholder.com/64?text=${i+1}`,
 message:`Message for capsule ${i+1}`,
 link:'',
 el:null,
 baseX:(Math.random()-0.5)*window.innerWidth*0.8,
 baseY:(Math.random()-0.5)*window.innerHeight*0.8,
 phiX:Math.random()*Math.PI*2,
 phiY:Math.random()*Math.PI*2,
 startTime:i*startInterval,
 z:startZ,
 interactive:false,
 done:false
}));
const particles=[];
function init(){
 const scene=document.getElementById('scene');
 const bg=document.getElementById('background');
 for(let i=0;i<20;i++){
  const d=document.createElement('div');
  d.className='particle';
  bg.appendChild(d);
  particles.push({el:d,baseX:Math.random()*window.innerWidth,baseY:Math.random()*window.innerHeight,ampX:20+Math.random()*30,ampY:20+Math.random()*30,phaseX:Math.random()*Math.PI*2,phaseY:Math.random()*Math.PI*2,speedX:0.05+Math.random()*0.05,speedY:0.05+Math.random()*0.05,scaleBase:0.5+Math.random()*0.5,phaseZ:Math.random()*Math.PI*2,speedZ:0.05+Math.random()*0.05});
 }
 capsulesData.forEach(c=>{
  const d=document.createElement('div');
  d.className='bubble';
  d.innerHTML=`<span>${c.id}</span>`;
  scene.appendChild(d);
  c.el=d;
  d.addEventListener('pointerenter',()=>{if(c.interactive)showTooltip(c)});
  d.addEventListener('pointerleave',hideTooltip);
  d.addEventListener('click',e=>{if(c.interactive){showTooltip(c);e.stopPropagation();}});
 });
 document.addEventListener('click',hideTooltip);
 requestAnimationFrame(animate);
}
function animate(t){
 const time=t/1000;
 particles.forEach(p=>{
  const x=p.baseX+Math.sin(time*p.speedX+p.phaseX)*p.ampX;
  const y=p.baseY+Math.sin(time*p.speedY+p.phaseY)*p.ampY;
  const s=p.scaleBase+0.2*Math.sin(time*p.speedZ+p.phaseZ);
  p.el.style.transform=`translate(${x}px,${y}px) scale(${s})`;
 });
 let interactiveCount=0;
 capsulesData.forEach(c=>{
  if(c.done)return;
  const dt=time-c.startTime;
  c.z=dt<0?startZ:startZ+dt*speed;
  if(c.z>endZ){c.el.style.display='none';c.done=true;return;}
  const x=c.baseX+Math.sin(time*0.3+c.phiX)*30;
  const y=c.baseY+Math.cos(time*0.25+c.phiY)*30;
  c.el.style.transform=`translate3d(${x}px,${y}px,${c.z}px)`;
  const active=c.z>=zoneMinZ&&c.z<=zoneMaxZ;
  if(active)interactiveCount++;
  if(active!==c.interactive){c.interactive=active;c.el.classList.toggle('interactive',active);}
 });
 requestAnimationFrame(animate);
}
function showTooltip(c){
 const tip=document.getElementById('tooltip');
 const rect=c.el.getBoundingClientRect();
 tip.textContent=c.message;
 tip.style.display='block';
 const tw=tip.offsetWidth;const th=tip.offsetHeight;
 const left=rect.left+rect.width/2-tw/2;
 const top=rect.top-th-8;
 tip.style.transform=`translate(${left}px,${top}px)`;
}
function hideTooltip(){document.getElementById('tooltip').style.display='none';}
window.addEventListener('load',init);
</script>
</body>
</html>
