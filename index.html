<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La CÃ¡psula</title>
<style>
/* Reset */
*,*:before,*:after{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Montserrat',Arial,sans-serif;background:#000;color:#fff;overflow:hidden;}
#scene{position:relative;width:100vw;height:100vh;perspective:800px;overflow:hidden;}
.particle{position:absolute;border-radius:50%;background:rgba(255,255,255,0.3);pointer-events:none;}
.bubble{position:absolute;border-radius:50%;border:1px solid rgba(255,255,255,0.8);box-shadow:inset 0 0 10px rgba(255,255,255,0.5),0 4px 10px rgba(0,0,0,0.4);overflow:hidden;transform-style:preserve-3d;}
.bubble img{width:100%;height:100%;object-fit:cover;border-radius:50%;filter:brightness(0.9);pointer-events:none;}
.bubble::after{content:"";position:absolute;left:15%;top:10%;width:70%;height:70%;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,0.8),rgba(255,255,255,0) 70%);pointer-events:none;}
.label{position:absolute;bottom:5%;width:100%;text-align:center;font-size:.7rem;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,0.7);pointer-events:none;}
.tooltip{position:absolute;padding:8px 12px;background:rgba(0,0,0,0.8);border-radius:4px;font-size:.9rem;display:none;pointer-events:none;z-index:1000;}
</style>
</head>
<body>
<div id="scene"></div>
<div class="tooltip" id="tooltip"></div>
<script>
const TOTAL=10000;          // total number of bubble data objects
const FRONT=9;              // number of bubbles shown in front
let nextIndex=0;            // pointer for next bubble data
const data=[];              // stores all 10,000 bubble infos
const slots=[];             // active bubbles in the DOM
const particles=[];         // background particle effects
const scene=document.getElementById('scene');
const tooltip=document.getElementById('tooltip');

/* Utility functions */
const rand=(a,b)=>Math.random()*(b-a)+a;
// generate a tiny svg data URI with unique color based on id
function makePhoto(id){
 const hue=(id*137.5)%360;
 const svg=`<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><defs><radialGradient id='g'><stop offset='0%' stop-color='hsl(${hue},70%,90%)'/><stop offset='100%' stop-color='hsl(${hue},70%,60%)'/></radialGradient></defs><rect width='64' height='64' fill='url(#g)'/></svg>`;
 return 'data:image/svg+xml;base64,'+btoa(svg);
}

/* Create the 10,000 bubble data objects */
for(let i=1;i<=TOTAL;i++){
 data.push({id:i,photo:makePhoto(i),message:`Bubble #${i}`});
}

/* Initialize background particles for subtle motion */
for(let i=0;i<25;i++){
 const p=document.createElement('div');
 p.className='particle';
 const size=1+Math.random()*3;
 p.style.width=p.style.height=size+'px';
 scene.appendChild(p);
 particles.push({el:p,x:Math.random()*100,y:Math.random()*100,ampX:rand(5,20),ampY:rand(5,20),phaseX:Math.random()*Math.PI*2,phaseY:Math.random()*Math.PI*2,speedX:rand(0.05,0.15),speedY:rand(0.05,0.15),baseOpacity:0.2+Math.random()*0.3});
}

/* Create DOM elements for the foreground bubbles */
for(let i=0;i<FRONT;i++){
 const div=document.createElement('div');
 div.className='bubble';
 div.style.width='80px';
 div.style.height='80px';
 const img=document.createElement('img');
 const label=document.createElement('div');
 label.className='label';
 div.appendChild(img);div.appendChild(label);scene.appendChild(div);
 div.addEventListener('mouseenter',()=>showTooltip(slots[i]));
 div.addEventListener('mouseleave',hideTooltip);
 slots.push({el:div,img,label,progress:0,start:0,duration:0,baseX:0,baseY:0,ampX:0,ampY:0,baseZ:0,ampZ:0,phaseX:0,phaseY:0,speed:0,data:null});
 assignBubble(slots[i]);
}

/* Assign next bubble data to a slot and randomize its motion */
function assignBubble(slot){
 const bubble=data[nextIndex];
 nextIndex=(nextIndex+1)%TOTAL;
 slot.data=bubble;
 slot.img.src=bubble.photo;
 slot.label.textContent=bubble.message;
 slot.progress=0;
 slot.start=performance.now();
 slot.duration=15000+rand(0,10000); // 15-25s
 // Distribute base positions across a 3x3 grid for spacing
 const row=Math.floor(slots.indexOf(slot)/3);
 const col=slots.indexOf(slot)%3;
 slot.baseX=(col+0.5)*33.33+rand(-5,5); // vw
 slot.baseY=(row+0.5)*33.33+rand(-5,5); // vh
 slot.ampX=rand(5,15); // movement range
 slot.ampY=rand(5,15);
 slot.baseZ=-600;
 slot.ampZ=600; // will move from -1200..0
 slot.phaseX=Math.random()*Math.PI*2;
 slot.phaseY=Math.random()*Math.PI*2;
 slot.speed=rand(0.4,0.8); // overall speed factor
}

/* Tooltip helpers */
function showTooltip(slot){
 tooltip.textContent=slot.data.message;
 tooltip.style.display='block';
 const rect=slot.el.getBoundingClientRect();
 const tipRect=tooltip.getBoundingClientRect();
 tooltip.style.left=rect.left+(rect.width-tipRect.width)/2+'px';
 tooltip.style.top=rect.top-tipRect.height-8+'px';
}
function hideTooltip(){tooltip.style.display='none';}

/* Animation loop updates bubble positions and background */
let last=performance.now();
function loop(now){
 const dt=(now-last)/1000;last=now;
 const time=now/1000;
 // update particles
 particles.forEach(p=>{
  const x=p.x+Math.sin(time*p.speedX+p.phaseX)*p.ampX;
  const y=p.y+Math.cos(time*p.speedY+p.phaseY)*p.ampY;
  p.el.style.transform=`translate(${x}vw,${y}vh)`;
  p.el.style.opacity=p.baseOpacity+Math.sin(time*p.speedX)*0.2;
 });
 // subtle background glow
 scene.style.background=`radial-gradient(circle at 50% 60%,rgba(255,255,255,${0.05+Math.sin(time*0.5)*0.05}),transparent 70%)`;
 // update bubbles
 slots.forEach(slot=>{
  const t=(now-slot.start)*0.001*slot.speed;
  slot.progress=t;
  const x=slot.baseX+Math.sin(t+slot.phaseX)*slot.ampX;
  const y=slot.baseY+Math.cos(t+slot.phaseY)*slot.ampY;
  const z=slot.baseZ+Math.sin(t)*slot.ampZ;
  const scale=0.3+(z+600)/600; // scale 0.3..1.3
  slot.el.style.transform=`translate(-50%,-50%) translate3d(${x}vw,${y}vh,${z}px) scale(${scale})`;
  slot.el.style.filter=`blur(${(1-scale)*2}px)`;
  if(t>Math.PI*2){assignBubble(slot);} // after one full cycle, rotate bubble
 });
 requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
