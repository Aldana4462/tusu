<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Floating Squares</title>
<style>
:root {
  --size: 20px;
  --scale: 2;
  --transition: 0.3s ease;
  --gold: #d4af37;
  --popup-bg: rgba(0,0,0,0.9);
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;background:#000;color:#fff;font-family:Arial,sans-serif;}
#board{position:relative;width:100%;height:100%;overflow:hidden;}
.square{
  position:absolute;left:0;top:0;
  width:var(--size);height:var(--size);
  background:#222;border:1px solid var(--gold);border-radius:4px;
  overflow:hidden;transition:transform var(--transition);transform-origin:center;
  cursor:pointer;
}
.square img{width:100%;height:100%;object-fit:cover;display:block;}
.square.active{transform:scale(var(--scale));z-index:1000;}
#popup{
  position:absolute;display:none;z-index:1001;
  background:var(--popup-bg);border:1px solid var(--gold);
  border-radius:6px;padding:8px;box-shadow:0 2px 6px rgba(0,0,0,0.6);
}
#popup a{color:var(--gold);text-decoration:underline;}
</style>
</head>
<body>
<div id="board"></div>
<div id="popup"></div>
<script>
const squares=[];
const COUNT=9;
for(let i=0;i<COUNT;i++){
  squares.push({
    id:i,
    msg:i===0?"compra aqui":"",
    url:i===0?"https://tusu.com.ar":"",
    img:i===0?"https://i.imgur.com/tEhrC0o.jpg":null,
    el:null,
    x:Math.random()*(window.innerWidth-40),
    y:Math.random()*(window.innerHeight-40)
  });
}
const board=document.getElementById('board');
const popup=document.getElementById('popup');
let active=null;
function createSquare(s){
  const d=document.createElement('div');
  d.className='square';
  d.style.left=s.x+'px';
  d.style.top=s.y+'px';
  d.tabIndex=0;
  if(s.img){
    const img=new Image();
    img.onload=()=>d.appendChild(img);
    img.onerror=()=>console.error('Failed to load image for square',s.id,s.img);
    img.src=s.img;
  }
  d.addEventListener('mouseenter',()=>show(s,d));
  d.addEventListener('focus',()=>show(s,d));
  d.addEventListener('mouseleave',hide);
  d.addEventListener('blur',hide);
  d.addEventListener('click',e=>{show(s,d);e.stopPropagation();});
  board.appendChild(d);s.el=d;
}
function show(s,el){
  active={s,el};
  el.classList.add('active');
  popup.innerHTML='';
  if(s.msg){const p=document.createElement('p');p.textContent=s.msg;popup.appendChild(p);}
  if(s.url){const a=document.createElement('a');a.href=s.url;a.target='_blank';a.textContent=s.url;popup.appendChild(a);}
  popup.style.display='block';
  positionPopup(el);
}
function hide(){
  if(!active)return;
  active.el.classList.remove('active');
  popup.style.display='none';
  active=null;
}
function positionPopup(el){
  const r=el.getBoundingClientRect();
  const pr=popup.getBoundingClientRect();
  let top=r.top-pr.height-8; if(top<0) top=r.bottom+8;
  let left=r.left+r.width/2-pr.width/2;
  left=Math.max(0,Math.min(left,window.innerWidth-pr.width));
  popup.style.top=top+'px';
  popup.style.left=left+'px';
}
board.addEventListener('click',hide);
document.body.addEventListener('click',e=>{if(active&&!popup.contains(e.target))hide();});
window.addEventListener('DOMContentLoaded',()=>{squares.forEach(createSquare);});
</script>
</body>
</html>
